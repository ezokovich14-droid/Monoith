{% extends "base.html" %}

{% block content %}
<h2 class="text-2xl font-bold mb-4">Commandes</h2>

<table class="w-full bg-white shadow rounded">
    <thead class="bg-gray-200">
        <tr>
            <th class="p-2">ID</th>
            <th class="p-2">Utilisateur</th>
            <th class="p-2">Statut</th>
            <th class="p-2">Total</th>
        </tr>
    </thead>
    <tbody id="orders-table"></tbody>
</table>

<script>
fetch('/api/orders/')
.then(res => res.json())
.then(data => {
    const table = document.getElementById('orders-table');
    data.forEach(o => {
        table.innerHTML += `
        <tr class="border-t">
            <td class="p-2">${o.id}</td>
            <td class="p-2">${o.user_name}</td>
            <td class="p-2">${o.status}</td>
            <td class="p-2">${o.total_amount}</td>
        </tr>`;
    });
});
</script>
{% endblock %}
